#N canvas 902 113 579 250 12;
#X obj 27 26 cnv 15 325 150 empty empty empty 20 12 0 14 -232576 -66577
0;
#X obj 209 45 tgl 15 0 play empty PLAY 17 7 0 10 -262144 -1 -1 1 1
;
#X obj 37 76 analyze_code;
#N canvas 182 78 965 823 getcomposition 1;
#X obj 61 644 makenote, f 12;
#X obj 61 704 noteout;
#N canvas 215 122 654 782 getnextnote 1;
#X obj 217 50 r first2;
#X msg 57 58 bang;
#X obj 57 28 inlet;
#X obj 217 109 outlet;
#X text 262 110 first 2 notes (just for checking);
#X obj 57 98 symbol;
#X symbolatom 217 80 10 0 0 0 - - -;
#X symbolatom 57 128 10 0 0 0 - - -;
#X obj 82 456 cyclone/coll order2;
#C restore;
#X obj 194 378 i, f 2;
#X obj 198 505 list length;
#X floatatom 198 535 5 0 0 0 - - -;
#X obj 198 594 random;
#X obj 198 564 t b f, f 6;
#X floatatom 198 624 5 0 0 0 - - -;
#X text 249 525 once we have a list \, we need to get a random element
from it \, so we calculate its length and generate a random value between
0 and length and we output this nth element;
#X obj 82 397 last2values;
#X obj 198 653 + 1;
#X obj 194 408 outlet;
#X obj 194 348 inlet;
#X text 192 329 next note;
#X symbolatom 82 427 10 0 0 0 - - -;
#X obj 82 486 t l l;
#X obj 82 672 packel;
#X obj 249 359 r next_note;
#X obj 82 731 s next_note;
#X floatatom 82 702 5 0 0 0 - - -;
#X obj 57 246 symbol2list;
#X obj 57 157 t s b, f 11;
#X symbolatom 131 217 10 0 0 0 - - -;
#X msg 131 187 symbol _;
#X obj 57 276 unpack f f;
#X obj 57 306 swap;
#X connect 0 0 6 0;
#X connect 1 0 5 0;
#X connect 2 0 1 0;
#X connect 5 0 7 0;
#X connect 6 0 3 0;
#X connect 6 0 5 1;
#X connect 7 0 28 0;
#X connect 8 0 22 0;
#X connect 9 0 16 0;
#X connect 9 0 18 0;
#X connect 10 0 11 0;
#X connect 11 0 13 0;
#X connect 12 0 14 0;
#X connect 13 0 12 0;
#X connect 13 1 12 1;
#X connect 14 0 17 0;
#X connect 16 0 21 0;
#X connect 17 0 23 1;
#X connect 19 0 9 0;
#X connect 21 0 8 0;
#X connect 22 0 23 0;
#X connect 22 1 10 0;
#X connect 23 0 26 0;
#X connect 24 0 9 1;
#X connect 26 0 25 0;
#X connect 27 0 31 0;
#X connect 28 0 27 0;
#X connect 28 1 30 0;
#X connect 29 0 27 1;
#X connect 30 0 29 0;
#X connect 31 0 32 0;
#X connect 31 1 32 1;
#X connect 32 0 9 1;
#X connect 32 1 16 0;
#X restore 61 446 pd getnextnote;
#X obj 156 54 t f b;
#X msg 206 54 reset;
#X symbolatom 156 476 10 0 0 1 first_2_notes - -;
#X floatatom 61 475 5 0 0 0 - - -;
#X obj 61 674 + 36;
#X obj 156 246 delay 500;
#X obj 316 265 list-abs/list-wrandom;
#X obj 356 355 cyclone/coll rhythm;
#C restore;
#X obj 184 156 r delay;
#X obj 356 465 s delay;
#X obj 184 216 t b f;
#X text 615 205 weighted probabilities;
#X obj 184 186 spigot;
#X obj 251 167 r play;
#X obj 90 419 r init;
#X msg 188 84 \; init bang;
#X obj 356 295 r init;
#X obj 156 24 r play;
#X obj 356 405 *;
#X obj 412 386 r quarter_duration;
#X obj 460 145 pack f f f f, f 20;
#X obj 473 95 t b f;
#X obj 519 95 t b f;
#X obj 565 95 t b f;
#X obj 460 35 r d1;
#X obj 473 65 r d2;
#X obj 519 35 r d3;
#X obj 565 65 r d4;
#X msg 356 325 0 0.25 \, 1 0.5 \, 2 1 \, 3 2;
#N canvas 150 334 816 169 init 0;
#X obj 42 23 loadbang;
#X msg 42 73 64;
#X obj 42 103 s dur_prob_init;
#X msg 162 73 500;
#X obj 162 103 s quarter_note_duration_init;
#X obj 493 103 s vel_std_init;
#X obj 373 103 s vel_mean_init;
#X msg 373 75 55;
#X msg 493 74 32;
#X obj 606 103 s staccato_legato_init;
#X msg 606 73 0.8;
#X connect 0 0 1 0;
#X connect 0 0 3 0;
#X connect 0 0 7 0;
#X connect 0 0 8 0;
#X connect 0 0 10 0;
#X connect 1 0 2 0;
#X connect 3 0 4 0;
#X connect 7 0 6 0;
#X connect 8 0 5 0;
#X connect 10 0 9 0;
#X restore 12 14 pd init;
#X msg 460 235 19.2424 64 107.758 101.343;
#X obj 460 175 t b l;
#X msg 492 205 set \$1 \$2 \$3 \$4;
#X text 534 325 0=1/16 - 1=1/8 - 2=1/4 - 3=1/2;
#X obj 100 574 maxlib/gauss, f 20;
#X obj 168 544 r velstd;
#X obj 237 544 r velmean;
#X obj 100 604 clip 0 127;
#X obj 356 435 t f f;
#X obj 61 541 t f b, f 6;
#X obj 457 468 *;
#X obj 475 443 r staccato_legato;
#X obj 453 633 cyclone/coll chars;
#C restore;
#X obj 374 700 print;
#X obj 372 578 r nextnote;
#X obj 81 508 s nextnote;
#X msg 372 602 \$1;
#X obj 374 655 pack f s;
#X obj 453 513 r init;
#X msg 374 678 \$2;
#X obj 589 721 textfile;
#X msg 717 664 write ./composition.txt;
#X msg 587 682 clear;
#X obj 589 641 r init;
#X msg 453 659 add2 \$1;
#X msg 453 536 0 \\\\n \, 1 __ \, 2 ! \, 3 ' \, 4 ( \, 5 ) \, 6 \,
\, 7 - \, 8 . \, 9 : \, 10 \\\; \, 11 ? \, 12 A \, 13 B \, 14 C \,
15 D \, 16 E \, 17 F \, 18 G \, 19 H \, 20 I \, 21 J \, 22 K \, 23
L \, 24 M \, 25 N \, 26 O \, 27 P \, 28 R \, 29 S \, 30 T \, 31 U \,
32 V \, 33 W \, 34 Y \, 35 a \, 36 b \, 37 c \, 38 d \, 39 e \, 40
f \, 41 g \, 42 h \, 43 i \, 44 j \, 45 k \, 46 l \, 47 m \, 48 n \,
49 o \, 50 p \, 51 q \, 52 r \, 53 s \, 54 t \, 55 u \, 56 v \, 57
w \, 58 x \, 59 y \, 60 z \,, f 63;
#X text 512 513 printing and saving text composition;
#X obj 638 641 r cleartxt;
#X obj 717 639 r savetxt;
#X obj 18 418 r restart;
#X connect 0 0 7 0;
#X connect 0 1 1 1;
#X connect 2 0 6 0;
#X connect 2 1 5 0;
#X connect 3 0 8 0;
#X connect 3 1 18 0;
#X connect 4 0 18 0;
#X connect 6 0 42 0;
#X connect 6 0 48 0;
#X connect 7 0 1 0;
#X connect 8 0 9 0;
#X connect 8 0 2 1;
#X connect 9 0 10 0;
#X connect 10 0 21 0;
#X connect 11 0 15 0;
#X connect 13 0 8 0;
#X connect 13 1 8 1;
#X connect 15 0 13 0;
#X connect 16 0 15 1;
#X connect 17 0 2 0;
#X connect 19 0 31 0;
#X connect 20 0 3 0;
#X connect 21 0 41 0;
#X connect 22 0 21 1;
#X connect 23 0 34 0;
#X connect 24 0 23 0;
#X connect 24 1 23 1;
#X connect 25 0 23 0;
#X connect 25 1 23 2;
#X connect 26 0 23 0;
#X connect 26 1 23 3;
#X connect 27 0 23 0;
#X connect 28 0 24 0;
#X connect 29 0 25 0;
#X connect 30 0 26 0;
#X connect 31 0 10 0;
#X connect 33 0 9 1;
#X connect 34 0 33 0;
#X connect 34 1 35 0;
#X connect 35 0 33 0;
#X connect 37 0 40 0;
#X connect 38 0 37 1;
#X connect 39 0 37 2;
#X connect 40 0 0 1;
#X connect 41 0 12 0;
#X connect 41 1 43 0;
#X connect 42 0 0 0;
#X connect 42 1 37 0;
#X connect 43 0 0 2;
#X connect 44 0 43 1;
#X connect 45 0 50 1;
#X connect 45 0 57 0;
#X connect 47 0 49 0;
#X connect 49 0 45 0;
#X connect 49 0 50 0;
#X connect 50 0 52 0;
#X connect 51 0 58 0;
#X connect 52 0 46 0;
#X connect 54 0 53 0;
#X connect 55 0 53 0;
#X connect 56 0 55 0;
#X connect 57 0 53 0;
#X connect 58 0 45 0;
#X connect 60 0 55 0;
#X connect 61 0 54 0;
#X connect 62 0 2 0;
#X restore 37 146 pd getcomposition;
#X obj 212 101 hsl 128 15 100 1000 0 0 quarter_duration quarter_note_duration_init
quarter_note_duration -2 -8 0 10 -262144 -1 -1 1200 1;
#X obj 353 26 cnv 15 190 150 empty empty duration_probabilities 12
12 0 12 -203904 -66577 0;
#X obj 373 65 vsl 15 100 0 127 0 0 d1 dur_prob_init 1/16 0 -9 0 10
-262144 -1 -1 1500 1;
#X obj 419 65 vsl 15 100 0 127 0 0 d2 dur_prob_init 1/8 0 -9 0 10 -262144
-1 -1 4989 1;
#X obj 463 65 vsl 15 100 0 127 0 0 d3 dur_prob_init 1/4 0 -9 0 10 -262144
-1 -1 8489 1;
#X obj 509 65 vsl 15 100 0 127 0 0 d4 dur_prob_init 1/2 0 -9 0 10 -262144
-1 -1 7989 1;
#X obj 212 147 hsl 128 15 0.01 0.95 0 0 staccato_legato staccato_legato_init
staccato_->_legato -2 -8 0 10 -262144 -1 -1 5200 1;
#X msg 37 46 load code;
#X obj 27 177 cnv 15 516 35 empty empty gauss_velocity 20 12 0 12 -261234
-66577 0;
#X obj 212 187 hsl 128 15 10 100 0 0 velmean vel_mean_init mean -35
6 0 10 -262144 -1 -1 950 1;
#X obj 394 187 hsl 128 15 0 64 0 0 velstd vel_std_init std -35 6 0
10 -262144 -1 -1 8650 1;
#X obj 39 113 bng 15 250 50 0 savetxt empty SAVE 17 7 0 10 -262144
-1 -1;
#X obj 89 113 bng 15 250 50 0 cleartxt empty CLEAR 17 7 0 10 -262144
-1 -1;
#X obj 274 45 bng 15 250 50 0 restart empty RESTART 17 7 0 10 -262144
-1 -1;
#X connect 11 0 2 0;
