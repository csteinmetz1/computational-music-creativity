#N canvas 21 23 840 1005 12;
#X obj 41 446 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X obj 35 180 int 1;
#X obj 92 180 + 1;
#X floatatom 35 206 5 0 0 0 - - -;
#X floatatom 35 255 5 0 0 0 - - -;
#X obj 238 378 == 2;
#X obj 80 381 == 0;
#X obj 156 381 == 1;
#X floatatom 80 404 2 0 0 0 - - -;
#X floatatom 156 403 2 0 0 0 - - -;
#X floatatom 238 400 2 0 0 0 - - -;
#X obj 35 278 t b f, f 9;
#X obj 41 424 spigot;
#X obj 117 446 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 117 424 spigot;
#X obj 199 444 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 199 421 spigot;
#X floatatom 152 199 5 0 0 0 - - -;
#X text 150 155 no. voices;
#X obj 277 445 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 277 422 spigot;
#X floatatom 104 153 5 0 0 0 - - -;
#X obj 35 302 s mb;
#X obj 41 401 r mb;
#X obj 117 400 r mb;
#X obj 199 397 r mb;
#X obj 277 399 r mb;
#X obj 95 302 s mf;
#X obj 80 358 r mf;
#X obj 156 358 r mf;
#X obj 238 357 r mf;
#X obj 316 356 r mf;
#X obj 356 443 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X floatatom 395 401 2 0 0 0 - - -;
#X floatatom 468 401 2 0 0 0 - - -;
#X floatatom 549 399 2 0 0 0 - - -;
#X obj 356 422 spigot;
#X obj 429 444 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 429 422 spigot;
#X obj 511 442 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 511 419 spigot;
#X floatatom 628 398 2 0 0 0 - - -;
#X obj 589 443 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 589 420 spigot;
#X obj 356 398 r mb;
#X obj 429 398 r mb;
#X obj 511 395 r mb;
#X obj 589 397 r mb;
#X obj 395 355 r mf;
#X obj 468 356 r mf;
#X obj 549 353 r mf;
#X obj 628 353 r mf;
#X floatatom 316 399 2 0 0 0 - - -;
#X obj 115 592 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X floatatom 154 550 2 0 0 0 - - -;
#X floatatom 230 549 2 0 0 0 - - -;
#X floatatom 312 546 2 0 0 0 - - -;
#X obj 115 570 spigot;
#X obj 191 592 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 191 570 spigot;
#X obj 273 590 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 273 567 spigot;
#X obj 351 591 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 351 568 spigot;
#X obj 115 547 r mb;
#X obj 191 546 r mb;
#X obj 273 543 r mb;
#X obj 351 545 r mb;
#X obj 154 504 r mf;
#X obj 230 504 r mf;
#X obj 312 503 r mf;
#X obj 390 502 r mf;
#X obj 430 589 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X floatatom 469 547 2 0 0 0 - - -;
#X floatatom 542 547 2 0 0 0 - - -;
#X floatatom 626 544 2 0 0 0 - - -;
#X obj 430 568 spigot;
#X obj 503 590 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 503 568 spigot;
#X obj 588 587 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 588 564 spigot;
#X obj 430 544 r mb;
#X obj 503 544 r mb;
#X obj 588 540 r mb;
#X obj 469 501 r mf;
#X obj 542 502 r mf;
#X obj 626 498 r mf;
#X floatatom 390 545 2 0 0 0 - - -;
#X obj 154 527 == 9;
#X obj 230 527 == 10;
#X obj 312 524 == 11;
#X obj 390 523 == 12;
#X obj 469 524 == 13;
#X obj 542 525 == 14;
#X obj 626 522 == 15;
#X obj 316 377 == 3;
#X obj 395 378 == 4;
#X obj 468 379 == 5;
#X obj 549 377 == 6;
#X obj 628 375 == 7;
#X floatatom 73 548 2 0 0 0 - - -;
#X obj 34 593 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X obj 34 570 spigot;
#X obj 34 547 r mb;
#X obj 73 503 r mf;
#X obj 73 525 == 8;
#X obj 37 33 inlet;
#X obj 113 33 inlet;
#X text 33 10 on/off;
#X text 112 9 period (ms);
#X obj 41 465 s b0;
#X obj 117 465 s b1;
#X obj 199 463 s b2;
#X obj 277 463 s b3;
#X obj 356 461 s b4;
#X obj 429 461 s b5;
#X obj 511 460 s b6;
#X obj 589 461 s b7;
#X obj 34 612 s b8;
#X obj 115 610 s b9;
#X obj 191 610 s b10;
#X obj 273 608 s b11;
#X obj 351 608 s b12;
#X obj 430 607 s b13;
#X obj 503 608 s b14;
#X obj 588 605 s b15;
#X obj 35 135 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 1
1;
#X obj 152 176 inlet;
#X obj 29 748 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X floatatom 68 706 2 0 0 0 - - -;
#X floatatom 144 705 2 0 0 0 - - -;
#X floatatom 226 702 2 0 0 0 - - -;
#X obj 29 726 spigot;
#X obj 105 748 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 105 726 spigot;
#X obj 187 746 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 187 723 spigot;
#X obj 265 747 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 265 724 spigot;
#X obj 29 703 r mb;
#X obj 105 702 r mb;
#X obj 187 699 r mb;
#X obj 265 701 r mb;
#X obj 68 660 r mf;
#X obj 144 660 r mf;
#X obj 226 659 r mf;
#X obj 304 658 r mf;
#X obj 344 745 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X floatatom 383 703 2 0 0 0 - - -;
#X floatatom 456 703 2 0 0 0 - - -;
#X floatatom 537 701 2 0 0 0 - - -;
#X obj 344 724 spigot;
#X obj 417 746 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 417 724 spigot;
#X obj 499 744 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 499 721 spigot;
#X floatatom 616 700 2 0 0 0 - - -;
#X obj 577 745 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 577 722 spigot;
#X obj 344 700 r mb;
#X obj 417 700 r mb;
#X obj 499 697 r mb;
#X obj 577 699 r mb;
#X obj 383 657 r mf;
#X obj 456 658 r mf;
#X obj 537 655 r mf;
#X obj 616 655 r mf;
#X floatatom 304 701 2 0 0 0 - - -;
#X obj 103 894 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X floatatom 142 852 2 0 0 0 - - -;
#X floatatom 218 851 2 0 0 0 - - -;
#X floatatom 300 848 2 0 0 0 - - -;
#X obj 103 872 spigot;
#X obj 179 894 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 179 872 spigot;
#X obj 261 892 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 261 869 spigot;
#X obj 339 893 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 339 870 spigot;
#X obj 103 849 r mb;
#X obj 179 848 r mb;
#X obj 261 845 r mb;
#X obj 339 847 r mb;
#X obj 142 806 r mf;
#X obj 218 806 r mf;
#X obj 300 805 r mf;
#X obj 378 804 r mf;
#X obj 418 891 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X floatatom 457 849 2 0 0 0 - - -;
#X floatatom 530 849 2 0 0 0 - - -;
#X floatatom 614 846 2 0 0 0 - - -;
#X obj 418 870 spigot;
#X obj 491 892 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 491 870 spigot;
#X obj 576 889 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 576 866 spigot;
#X obj 418 846 r mb;
#X obj 491 846 r mb;
#X obj 576 842 r mb;
#X obj 457 803 r mf;
#X obj 530 804 r mf;
#X obj 614 800 r mf;
#X floatatom 378 847 2 0 0 0 - - -;
#X floatatom 61 850 2 0 0 0 - - -;
#X obj 22 895 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X obj 22 872 spigot;
#X obj 22 849 r mb;
#X obj 61 805 r mf;
#X text 693 420 voices 0-7;
#X text 698 563 voices 8-15;
#X obj 29 767 s b16;
#X obj 105 767 s b17;
#X obj 187 765 s b18;
#X obj 265 765 s b19;
#X obj 344 763 s b20;
#X obj 417 763 s b21;
#X obj 499 762 s b22;
#X obj 577 763 s b23;
#X text 691 725 voices 16-23;
#X obj 22 914 s b24;
#X obj 103 912 s b25;
#X obj 179 912 s b26;
#X obj 261 910 s b27;
#X obj 339 910 s b28;
#X obj 418 909 s b29;
#X obj 491 910 s b30;
#X obj 576 906 s b31;
#X text 692 867 voices 24-31;
#X obj 68 683 == 16;
#X obj 144 683 == 17;
#X obj 226 680 == 18;
#X obj 304 679 == 19;
#X obj 383 680 == 20;
#X obj 456 681 == 21;
#X obj 537 679 == 22;
#X obj 616 677 == 23;
#X obj 61 827 == 24;
#X obj 142 829 == 25;
#X obj 218 829 == 26;
#X obj 300 826 == 27;
#X obj 378 825 == 28;
#X obj 457 826 == 29;
#X obj 530 827 == 30;
#X obj 614 824 == 31;
#X obj 35 232 mod 32;
#X obj 35 155 metro 100;
#X obj 77 255 s n-grain;
#X obj 113 56 t b f;
#X msg 113 78 1;
#X obj 127 101 /;
#X obj 127 126 * 1000;
#X text 186 259 the system below is a crude way to selectively send
bangs to each granular module to tell it to play its grain. We take
in the counter value which is mod n \, where n is the number of voices
and then compare this value to the voice's id (0-31). If a match we
send a bang to that graular voice;
#X text 251 24 we take in the on/off control as well as the period
in ms. this is a very simple system based around a metro that is firing
once every n ms given the period. if we had just a single voice this
would trigger a single grain to play. the issue is if the next bang
comes before the previous grain has finished playing through \, there
will be a click. We don't want to shorten the grain size because this
changes how much overlap we can get. to address this we have many voices
(32!);
#X connect 0 0 110 0;
#X connect 1 0 2 0;
#X connect 1 0 3 0;
#X connect 2 0 1 1;
#X connect 3 0 244 0;
#X connect 4 0 11 0;
#X connect 5 0 10 0;
#X connect 6 0 8 0;
#X connect 7 0 9 0;
#X connect 8 0 12 1;
#X connect 9 0 14 1;
#X connect 10 0 16 1;
#X connect 11 0 22 0;
#X connect 11 1 27 0;
#X connect 12 0 0 0;
#X connect 13 0 111 0;
#X connect 14 0 13 0;
#X connect 15 0 112 0;
#X connect 16 0 15 0;
#X connect 17 0 244 1;
#X connect 19 0 113 0;
#X connect 20 0 19 0;
#X connect 21 0 245 1;
#X connect 23 0 12 0;
#X connect 24 0 14 0;
#X connect 25 0 16 0;
#X connect 26 0 20 0;
#X connect 28 0 6 0;
#X connect 29 0 7 0;
#X connect 30 0 5 0;
#X connect 31 0 95 0;
#X connect 32 0 114 0;
#X connect 33 0 36 1;
#X connect 34 0 38 1;
#X connect 35 0 40 1;
#X connect 36 0 32 0;
#X connect 37 0 115 0;
#X connect 38 0 37 0;
#X connect 39 0 116 0;
#X connect 40 0 39 0;
#X connect 41 0 43 1;
#X connect 42 0 117 0;
#X connect 43 0 42 0;
#X connect 44 0 36 0;
#X connect 45 0 38 0;
#X connect 46 0 40 0;
#X connect 47 0 43 0;
#X connect 48 0 96 0;
#X connect 49 0 97 0;
#X connect 50 0 98 0;
#X connect 51 0 99 0;
#X connect 52 0 20 1;
#X connect 53 0 119 0;
#X connect 54 0 57 1;
#X connect 55 0 59 1;
#X connect 56 0 61 1;
#X connect 57 0 53 0;
#X connect 58 0 120 0;
#X connect 59 0 58 0;
#X connect 60 0 121 0;
#X connect 61 0 60 0;
#X connect 62 0 122 0;
#X connect 63 0 62 0;
#X connect 64 0 57 0;
#X connect 65 0 59 0;
#X connect 66 0 61 0;
#X connect 67 0 63 0;
#X connect 68 0 88 0;
#X connect 69 0 89 0;
#X connect 70 0 90 0;
#X connect 71 0 91 0;
#X connect 72 0 123 0;
#X connect 73 0 76 1;
#X connect 74 0 78 1;
#X connect 75 0 80 1;
#X connect 76 0 72 0;
#X connect 77 0 124 0;
#X connect 78 0 77 0;
#X connect 79 0 125 0;
#X connect 80 0 79 0;
#X connect 81 0 76 0;
#X connect 82 0 78 0;
#X connect 83 0 80 0;
#X connect 84 0 92 0;
#X connect 85 0 93 0;
#X connect 86 0 94 0;
#X connect 87 0 63 1;
#X connect 88 0 54 0;
#X connect 89 0 55 0;
#X connect 90 0 56 0;
#X connect 91 0 87 0;
#X connect 92 0 73 0;
#X connect 93 0 74 0;
#X connect 94 0 75 0;
#X connect 95 0 52 0;
#X connect 96 0 33 0;
#X connect 97 0 34 0;
#X connect 98 0 35 0;
#X connect 99 0 41 0;
#X connect 100 0 102 1;
#X connect 101 0 118 0;
#X connect 102 0 101 0;
#X connect 103 0 102 0;
#X connect 104 0 105 0;
#X connect 105 0 100 0;
#X connect 106 0 126 0;
#X connect 107 0 247 0;
#X connect 126 0 245 0;
#X connect 127 0 17 0;
#X connect 128 0 210 0;
#X connect 129 0 132 1;
#X connect 130 0 134 1;
#X connect 131 0 136 1;
#X connect 132 0 128 0;
#X connect 133 0 211 0;
#X connect 134 0 133 0;
#X connect 135 0 212 0;
#X connect 136 0 135 0;
#X connect 137 0 213 0;
#X connect 138 0 137 0;
#X connect 139 0 132 0;
#X connect 140 0 134 0;
#X connect 141 0 136 0;
#X connect 142 0 138 0;
#X connect 143 0 228 0;
#X connect 144 0 229 0;
#X connect 145 0 230 0;
#X connect 146 0 231 0;
#X connect 147 0 214 0;
#X connect 148 0 151 1;
#X connect 149 0 153 1;
#X connect 150 0 155 1;
#X connect 151 0 147 0;
#X connect 152 0 215 0;
#X connect 153 0 152 0;
#X connect 154 0 216 0;
#X connect 155 0 154 0;
#X connect 156 0 158 1;
#X connect 157 0 217 0;
#X connect 158 0 157 0;
#X connect 159 0 151 0;
#X connect 160 0 153 0;
#X connect 161 0 155 0;
#X connect 162 0 158 0;
#X connect 163 0 232 0;
#X connect 164 0 233 0;
#X connect 165 0 234 0;
#X connect 166 0 235 0;
#X connect 167 0 138 1;
#X connect 168 0 220 0;
#X connect 169 0 172 1;
#X connect 170 0 174 1;
#X connect 171 0 176 1;
#X connect 172 0 168 0;
#X connect 173 0 221 0;
#X connect 174 0 173 0;
#X connect 175 0 222 0;
#X connect 176 0 175 0;
#X connect 177 0 223 0;
#X connect 178 0 177 0;
#X connect 179 0 172 0;
#X connect 180 0 174 0;
#X connect 181 0 176 0;
#X connect 182 0 178 0;
#X connect 183 0 237 0;
#X connect 184 0 238 0;
#X connect 185 0 239 0;
#X connect 186 0 240 0;
#X connect 187 0 224 0;
#X connect 188 0 191 1;
#X connect 189 0 193 1;
#X connect 190 0 195 1;
#X connect 191 0 187 0;
#X connect 192 0 225 0;
#X connect 193 0 192 0;
#X connect 194 0 226 0;
#X connect 195 0 194 0;
#X connect 196 0 191 0;
#X connect 197 0 193 0;
#X connect 198 0 195 0;
#X connect 199 0 241 0;
#X connect 200 0 242 0;
#X connect 201 0 243 0;
#X connect 202 0 178 1;
#X connect 203 0 205 1;
#X connect 204 0 219 0;
#X connect 205 0 204 0;
#X connect 206 0 205 0;
#X connect 207 0 236 0;
#X connect 228 0 129 0;
#X connect 229 0 130 0;
#X connect 230 0 131 0;
#X connect 231 0 167 0;
#X connect 232 0 148 0;
#X connect 233 0 149 0;
#X connect 234 0 150 0;
#X connect 235 0 156 0;
#X connect 236 0 203 0;
#X connect 237 0 169 0;
#X connect 238 0 170 0;
#X connect 239 0 171 0;
#X connect 240 0 202 0;
#X connect 241 0 188 0;
#X connect 242 0 189 0;
#X connect 243 0 190 0;
#X connect 244 0 4 0;
#X connect 244 0 246 0;
#X connect 245 0 1 0;
#X connect 247 0 248 0;
#X connect 247 1 249 1;
#X connect 248 0 249 0;
#X connect 249 0 250 0;
#X connect 250 0 21 0;
